# Key = Category
# TAGS:
# @CWIDTH : Capture Width
# @CHEIGHT: Capture Height
# @SEEK : Starting seek position
# @FILE: source input file
# @OWIDTH: Width of the output image
# @OHEIGHT: Height of the output image
# @RATE: Frame rate
# @VPORT: Port used for receiving video data
# @APORT: Port used for receiving audio data
# @VCODEC: Video codec (FME)
# @ACODEC: Audio codec (FME)
# @VBITRATE: Video bitrate (FME)
# @ABITRATE: Audio bitrate (FME);
# @KEYINT: Keyframe_frequency (FME);

#GStreamer back-end
#broadcast=gnome-terminal -x gst-launch-0.10 tcpclientsrc port=@VPORT ! video/x-raw-rgb,width=@CWIDTH,height=@CHEIGHT,depth=24,bpp=24,blue_mask=255,green_mask=65280,red_mask=16711680 ! ffenc_flv ! flvmux name=mux ! rtmpsink location='"@URL flashver=FME/2.5\20(compatible;\20FMSc\201.0)"' tcpclientsrc port=@APORT ! audio/x-raw-int,rate=22050,channels=2,signed=true,width=16,depth=16,endianness=4321 ! ffenc_aac ! mux.
iceCast=gst-launch-0.10 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! theoraenc quality=16 ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCast sync=false
iceCastHQ=gst-launch-0.10 tcpclientsrc port=@VPORT ! videoparse format=rgb width=@CWIDTH height=@CHEIGHT framerate=@RATE/1 ! queue max-size-buffers=0 max-size-time=0 ! ffmpegcolorspace ! videoscale ! videorate ! video/x-raw-rgb, framerate=@RATE/1, width=@CWIDTH, height=@CHEIGHT, depth=24, bpp=24, blue_mask=255, green_mask=65280, red_mask=16711680, byte-stream=true ! ffmpegcolorspace ! theoraenc ! queue max-size-buffers=0 max-size-time=0 ! oggmux name=mux tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! queue max-size-buffers=0 max-size-time=0 ! audioconvert ! vorbisenc ! queue max-size-buffers=0 max-size-time=0 ! mux. mux. ! queue max-size-buffers=0 max-size-time=0 ! shout2send ip=@URL port=@PORT password=@PASSWORD mount=@MOUNT streamname=WSIceCastHQ sync=false
#spkAudioOut=gst-launch-0.10 tcpclientsrc port=@APORT ! audio/x-raw-int,rate=@FREQ,channels=@CHANNELS,signed=true,width=16,depth=16,endianness=4321 ! audioconvert ! alsasink

#GStreamer 1.0 back-end
spkAudioOut=gst-launch-1.0 tcpclientsrc port=@APORT ! audio/x-raw, format=S16BE, channels=2, rate=@FREQ ! audioconvert ! alsasink

#AVCONV back-end
file=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -strict experimental -b 1200k -ac 2 -ar @FREQ -ab 128k -g @KEYINT -y @FILE
broadcast=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -g @KEYINT -f flv -b @VBITRATEk -ab @ABITRATEk @URL

#broadcastHQ=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE  -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -vcodec libx264 -maxrate 650k -r @RATE -s @CWIDTHx@CHEIGHT  -acodec libmp3lame -ab 96k -ac 2 -ar @FREQ -f flv -g 150 -b 650k -ab @ABITRATEk @URL
#broadcastHQ=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -vcodec libx264 -maxrate 650k -r @RATE -s @CWIDTHx@CHEIGHT -acodec libmp3lame -ab @ABITRATEk -ac 2 -ar @FREQ -g @KEYINT -f flv -vcodec libx264 -s @CWIDTHx@CHEIGHT -preset fast -tune zerolatency -minrate 650k -maxrate 650k -bufsize 650k -acodec libmp3lame -ar @FREQ -threads 6 -qscale 3 @URL
broadcastHQ=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -acodec libmp3lame -ab @ABITRATEk -ac 2 -ar @FREQ -g @KEYINT -f flv -b @VBITRATEk -ab @ABITRATEk -acodec libmp3lame -ar @FREQ -threads 6 -qscale 3 @URL

udp=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE  -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -g @KEYINT -b 1200k -ab 96k -f mpegts udp://127.0.0.1:7000
udpHQ=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -vcodec libx264 -maxrate 512k -r @RATE -s @CWIDTHx@CHEIGHT -acodec libmp3lame -ab 96k -ac 2 -ar @FREQ -g @KEYINT -f mpegts udp://127.0.0.1:7000
broadcastR5HQ=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -vcodec libx264 -maxrate @VBITRATEk -r @RATE -s @CWIDTHx@CHEIGHT  -acodec libmp3lame -ab @ABITRATEk -ac 1 -ar 44100 -g @KEYINT -f flv @URL
broadcastR5=avconv -v 0 -s @CWIDTHx@CHEIGHT -r @RATE -f rawvideo -pix_fmt rgb24  -i tcp://127.0.0.1:@VPORT -ar @FREQ -ac @CHANNELS -f s@BITSIZEbe -i tcp://127.0.0.1:@APORT -g @KEYINT -f flv -b @VBITRATEk -ab @ABITRATEk @URL

#Some tag translation
TAG_MP3=libmp3lame
TAG_VP6=flv
TAG_H_264=flv
#libx264 -vpre baseline